"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2660],{2660:(W,O,g)=>{g.r(O),g.d(O,{CapacitorGoogleMapsWeb:()=>Lt});var d=g(5861),C=g(7423),L=g(2559),A=g.n(L);const S=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class U{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,s]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const n=s>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const o=S[15&s];if(!o)throw new Error("Unrecognized array type.");const[r]=new Uint16Array(t,2,1),[l]=new Uint32Array(t,4,1);return new U(l,r,o,t)}constructor(t,e=64,s=Float64Array,n){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=s,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const o=S.indexOf(this.ArrayType),r=2*t*this.ArrayType.BYTES_PER_ELEMENT,l=t*this.IndexArrayType.BYTES_PER_ELEMENT,i=(8-l%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${s}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+l+i,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+r+l+i),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+l+i,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=t,this.coords[this._pos++]=e,s}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return R(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,s,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:r,nodeSize:l}=this,i=[0,o.length-1,0],u=[];for(;i.length;){const h=i.pop()||0,c=i.pop()||0,p=i.pop()||0;if(c-p<=l){for(let m=p;m<=c;m++){const y=r[2*m],k=r[2*m+1];y>=t&&y<=s&&k>=e&&k<=n&&u.push(o[m])}continue}const f=p+c>>1,w=r[2*f],M=r[2*f+1];w>=t&&w<=s&&M>=e&&M<=n&&u.push(o[f]),(0===h?t<=w:e<=M)&&(i.push(p),i.push(f-1),i.push(1-h)),(0===h?s>=w:n>=M)&&(i.push(f+1),i.push(c),i.push(1-h))}return u}within(t,e,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:r}=this,l=[0,n.length-1,0],i=[],u=s*s;for(;l.length;){const h=l.pop()||0,c=l.pop()||0,p=l.pop()||0;if(c-p<=r){for(let m=p;m<=c;m++)K(o[2*m],o[2*m+1],t,e)<=u&&i.push(n[m]);continue}const f=p+c>>1,w=o[2*f],M=o[2*f+1];K(w,M,t,e)<=u&&i.push(n[f]),(0===h?t-s<=w:e-s<=M)&&(l.push(p),l.push(f-1),l.push(1-h)),(0===h?t+s>=w:e+s>=M)&&(l.push(f+1),l.push(c),l.push(1-h))}return i}}function R(a,t,e,s,n,o){if(n-s<=e)return;const r=s+n>>1;J(a,t,r,s,n,o),R(a,t,e,s,r-1,1-o),R(a,t,e,r+1,n,1-o)}function J(a,t,e,s,n,o){for(;n>s;){if(n-s>600){const u=n-s+1,h=e-s+1,c=Math.log(u),p=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*p*(u-p)/u)*(h-u/2<0?-1:1);J(a,t,e,Math.max(s,Math.floor(e-h*p/u+f)),Math.min(n,Math.floor(e+(u-h)*p/u+f)),o)}const r=t[2*e+o];let l=s,i=n;for(D(a,t,s,e),t[2*n+o]>r&&D(a,t,s,n);l<i;){for(D(a,t,l,i),l++,i--;t[2*l+o]<r;)l++;for(;t[2*i+o]>r;)i--}t[2*s+o]===r?D(a,t,s,i):(i++,D(a,t,i,n)),i<=e&&(s=i+1),e<=i&&(n=i-1)}}function D(a,t,e,s){j(a,e,s),j(t,2*e,2*s),j(t,2*e+1,2*s+1)}function j(a,t,e){const s=a[t];a[t]=a[e],a[e]=s}function K(a,t,e,s){const n=a-e,o=t-s;return n*n+o*o}const it={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:a=>a},Y=Math.fround||(a=new Float32Array(1),t=>(a[0]=+t,a[0])),x=3,P=5,Q=6;var a;class at{constructor(t){this.options=Object.assign(Object.create(it),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:s,maxZoom:n}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;const r=[];for(let i=0;i<t.length;i++){const u=t[i];if(!u.geometry)continue;const[h,c]=u.geometry.coordinates,p=Y(z(h)),f=Y(F(c));r.push(p,f,1/0,i,-1,1),this.options.reduce&&r.push(0)}let l=this.trees[n+1]=this._createTree(r);e&&console.timeEnd(o);for(let i=n;i>=s;i--){const u=+Date.now();l=this.trees[i]=this._createTree(this._cluster(l,i)),e&&console.log("z%d: %d clusters in %dms",i,l.numItems,+Date.now()-u)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let s=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let o=180===t[2]?180:((t[2]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)s=-180,o=180;else if(s>o){const c=this.getClusters([s,n,180,r],e),p=this.getClusters([-180,n,o,r],e);return c.concat(p)}const l=this.trees[this._limitZoom(e)],i=l.range(z(s),F(r),z(o),F(n)),u=l.data,h=[];for(const c of i){const p=this.stride*c;h.push(u[p+P]>1?X(u,p,this.clusterProps):this.points[u[p+x]])}return h}getChildren(t){const e=this._getOriginId(t),s=this._getOriginZoom(t),n="No cluster with the specified id.",o=this.trees[s];if(!o)throw new Error(n);const r=o.data;if(e*this.stride>=r.length)throw new Error(n);const l=this.options.radius/(this.options.extent*Math.pow(2,s-1)),h=o.within(r[e*this.stride],r[e*this.stride+1],l),c=[];for(const p of h){const f=p*this.stride;r[f+4]===t&&c.push(r[f+P]>1?X(r,f,this.clusterProps):this.points[r[f+x]])}if(0===c.length)throw new Error(n);return c}getLeaves(t,e,s){const n=[];return this._appendLeaves(n,t,e=e||10,s=s||0,0),n}getTile(t,e,s){const n=this.trees[this._limitZoom(t)],o=Math.pow(2,t),{extent:r,radius:l}=this.options,i=l/r,u=(s-i)/o,h=(s+1+i)/o,c={features:[]};return this._addTileFeatures(n.range((e-i)/o,u,(e+1+i)/o,h),n.data,e,s,o,c),0===e&&this._addTileFeatures(n.range(1-i/o,u,1,h),n.data,o,s,o,c),e===o-1&&this._addTileFeatures(n.range(0,u,i/o,h),n.data,-1,s,o,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const s=this.getChildren(t);if(e++,1!==s.length)break;t=s[0].properties.cluster_id}return e}_appendLeaves(t,e,s,n,o){const r=this.getChildren(e);for(const l of r){const i=l.properties;if(i&&i.cluster?o+i.point_count<=n?o+=i.point_count:o=this._appendLeaves(t,i.cluster_id,s,n,o):o<n?o++:t.push(l),t.length===s)break}return o}_createTree(t){const e=new U(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let s=0;s<t.length;s+=this.stride)e.add(t[s],t[s+1]);return e.finish(),e.data=t,e}_addTileFeatures(t,e,s,n,o,r){for(const l of t){const i=l*this.stride,u=e[i+P]>1;let h,c,p;if(u)h=q(e,i,this.clusterProps),c=e[i],p=e[i+1];else{const M=this.points[e[i+x]];h=M.properties;const[m,y]=M.geometry.coordinates;c=z(m),p=F(y)}const f={type:1,geometry:[[Math.round(this.options.extent*(c*o-s)),Math.round(this.options.extent*(p*o-n))]],tags:h};let w;w=u||this.options.generateId?e[i+x]:this.points[e[i+x]].id,void 0!==w&&(f.id=w),r.features.push(f)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:s,extent:n,reduce:o,minPoints:r}=this.options,l=s/(n*Math.pow(2,e)),i=t.data,u=[],h=this.stride;for(let c=0;c<i.length;c+=h){if(i[c+2]<=e)continue;i[c+2]=e;const p=i[c],f=i[c+1],w=t.within(i[c],i[c+1],l),M=i[c+P];let m=M;for(const y of w){const k=y*h;i[k+2]>e&&(m+=i[k+P])}if(m>M&&m>=r){let b,y=p*M,k=f*M,ot=-1;const H=((c/h|0)<<5)+(e+1)+this.points.length;for(const kt of w){const Z=kt*h;if(i[Z+2]<=e)continue;i[Z+2]=e;const rt=i[Z+P];y+=i[Z]*rt,k+=i[Z+1]*rt,i[Z+4]=H,o&&(b||(b=this._map(i,c,!0),ot=this.clusterProps.length,this.clusterProps.push(b)),o(b,this._map(i,Z)))}i[c+4]=H,u.push(y/m,k/m,1/0,H,-1,m),o&&u.push(ot)}else{for(let y=0;y<h;y++)u.push(i[c+y]);if(m>1)for(const y of w){const k=y*h;if(!(i[k+2]<=e)){i[k+2]=e;for(let b=0;b<h;b++)u.push(i[k+b])}}}}return u}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,s){if(t[e+P]>1){const r=this.clusterProps[t[e+Q]];return s?Object.assign({},r):r}const n=this.points[t[e+x]].properties,o=this.options.map(n);return s&&o===n?Object.assign({},o):o}}function X(a,t,e){return{type:"Feature",id:a[t+x],properties:q(a,t,e),geometry:{type:"Point",coordinates:[lt(a[t]),ct(a[t+1])]}}}function q(a,t,e){const s=a[t+P],n=s>=1e4?`${Math.round(s/1e3)}k`:s>=1e3?Math.round(s/100)/10+"k":s,o=a[t+Q],r=-1===o?{}:Object.assign({},e[o]);return Object.assign(r,{cluster:!0,cluster_id:a[t+x],point_count:s,point_count_abbreviated:n})}function z(a){return a/360+.5}function F(a){const t=Math.sin(a*Math.PI/180),e=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return e<0?0:e>1?1:e}function lt(a){return 360*(a-.5)}function ct(a){const t=(180-360*a)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}class v{static isAdvancedMarkerAvailable(t){return google.maps.marker&&!0===t.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,e){this.isAdvancedMarker(t)?t.map=e:t.setMap(e)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return!!this.isAdvancedMarker(t)||t.getVisible()}}class T{constructor({markers:t,position:e}){this.markers=t,e&&(this._position=e instanceof google.maps.LatLng?e:new google.maps.LatLng(e))}get bounds(){if(0===this.markers.length&&!this._position)return;const t=new google.maps.LatLngBounds(this._position,this._position);for(const e of this.markers)t.extend(v.getPosition(e));return t}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>v.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(v.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class gt{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return ft(t)}}const ft=a=>a.map(e=>new T({position:v.getPosition(e),markers:[e]}));class st extends gt{constructor(t){var{maxZoom:e,radius:s=60}=t,n=function _(a,t){var e={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&t.indexOf(s)<0&&(e[s]=a[s]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(a);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(a,s[n])&&(e[s[n]]=a[s[n]])}return e}(t,["maxZoom","radius"]);super({maxZoom:e}),this.state={zoom:-1},this.superCluster=new at(Object.assign({maxZoom:this.maxZoom,radius:s},n))}calculate(t){let e=!1;const s={zoom:t.map.getZoom()};if(!A()(t.markers,this.markers)){e=!0,this.markers=[...t.markers];const n=this.markers.map(o=>{const r=v.getPosition(o);return{type:"Feature",geometry:{type:"Point",coordinates:[r.lng(),r.lat()]},properties:{marker:o}}});this.superCluster.load(n)}return e||(this.state.zoom<=this.maxZoom||s.zoom<=this.maxZoom)&&(e=!A()(this.state,s)),this.state=s,e&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:e}}cluster({map:t}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(e=>this.transformCluster(e))}transformCluster({geometry:{coordinates:[t,e]},properties:s}){if(s.cluster)return new T({markers:this.superCluster.getLeaves(s.cluster_id,1/0).map(o=>o.properties.marker),position:{lat:e,lng:t}});const n=s.marker;return new T({markers:[n],position:v.getPosition(n)})}}class mt{constructor(t,e){this.markers={sum:t.length};const s=e.map(o=>o.count),n=s.reduce((o,r)=>o+r,0);this.clusters={count:e.length,markers:{mean:n/e.length,sum:n,min:Math.min(...s),max:Math.max(...s)}}}}class wt{render({count:t,position:e},s,n){const r=`<svg fill="${t>Math.max(10,s.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${t}</text>\n</svg>`,l=`Cluster of ${t} markers`,i=Number(google.maps.Marker.MAX_ZINDEX)+t;if(v.isAdvancedMarkerAvailable(n)){const c=(new DOMParser).parseFromString(r,"image/svg+xml").documentElement;return c.setAttribute("transform","translate(0 25)"),new google.maps.marker.AdvancedMarkerElement({map:n,position:e,zIndex:i,title:l,content:c})}const u={position:e,zIndex:i,title:l,icon:{url:`data:image/svg+xml;base64,${btoa(r)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class V{constructor(){!function vt(a,t){for(let e in t.prototype)a.prototype[e]=t.prototype[e]}(V,google.maps.OverlayView)}}var I=(()=>(function(a){a.CLUSTERING_BEGIN="clusteringbegin",a.CLUSTERING_END="clusteringend",a.CLUSTER_CLICK="click"}(I||(I={})),I))();const Mt=(a,t,e)=>{e.fitBounds(t.bounds)};class yt extends V{constructor({map:t,markers:e=[],algorithmOptions:s={},algorithm:n=new st(s),renderer:o=new wt,onClusterClick:r=Mt}){super(),this.markers=[...e],this.clusters=[],this.algorithm=n,this.renderer=o,this.onClusterClick=r,t&&this.setMap(t)}addMarker(t,e){this.markers.includes(t)||(this.markers.push(t),e||this.render())}addMarkers(t,e){t.forEach(s=>{this.addMarker(s,!0)}),e||this.render()}removeMarker(t,e){const s=this.markers.indexOf(t);return-1!==s&&(v.setMap(t,null),this.markers.splice(s,1),e||this.render(),!0)}removeMarkers(t,e){let s=!1;return t.forEach(n=>{s=this.removeMarker(n,!0)||s}),s&&!e&&this.render(),s}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,I.CLUSTERING_BEGIN,this);const{clusters:e,changed:s}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(s||null==s){const n=new Set;for(const r of e)1==r.markers.length&&n.add(r.markers[0]);const o=[];for(const r of this.clusters)null!=r.marker&&(1==r.markers.length?n.has(r.marker)||v.setMap(r.marker,null):o.push(r.marker));this.clusters=e,this.renderClusters(),requestAnimationFrame(()=>o.forEach(r=>v.setMap(r,null)))}google.maps.event.trigger(this,I.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>v.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){const t=new mt(this.markers,this.clusters),e=this.getMap();this.clusters.forEach(s=>{1===s.markers.length?s.marker=s.markers[0]:(s.marker=this.renderer.render(s,t,e),s.markers.forEach(n=>v.setMap(n,null)),this.onClusterClick&&s.marker.addListener("click",n=>{google.maps.event.trigger(this,I.CLUSTER_CLICK,s),this.onClusterClick(n,s,e)})),v.setMap(s.marker,e)})}}var nt=g(1592);class Lt extends C.Uw{constructor(){super(...arguments),this.gMapsRef=void 0,this.maps={},this.currMarkerId=0,this.onClusterClickHandler=(t,e,s)=>{var n,o;const r=this.getIdFromMap(s),l=[];if(null!=e.markers)for(const i of e.markers){const u=this.getIdFromMarker(r,i);l.push({markerId:u,latitude:null===(n=i.getPosition())||void 0===n?void 0:n.lat(),longitude:null===(o=i.getPosition())||void 0===o?void 0:o.lng(),title:i.getTitle(),snippet:""})}this.notifyListeners("onClusterClick",{mapId:r,latitude:e.position.lat(),longitude:e.position.lng(),size:e.count,items:l})}}getIdFromMap(t){for(const e in this.maps)if(this.maps[e].map==t)return e;return""}getIdFromMarker(t,e){for(const s in this.maps[t].markers)if(this.maps[t].markers[s]==e)return s;return""}importGoogleLib(t){var e=this;return(0,d.Z)(function*(){if(void 0===e.gMapsRef){const s=yield g.e(9706).then(g.bind(g,9706)),o=yield new s.Loader({apiKey:null!=t?t:"",version:"weekly",libraries:["places"]}).load();e.gMapsRef=o.maps,console.log("Loaded google maps API")}})()}setCamera(t){var e=this;return(0,d.Z)(function*(){e.maps[t.id].map.moveCamera({center:t.config.coordinate,heading:t.config.bearing,tilt:t.config.angle,zoom:t.config.zoom})})()}getMapType(t){var e=this;return(0,d.Z)(function*(){let s=e.maps[t.id].map.getMapTypeId();if(void 0!==s)return"roadmap"===s&&(s=nt.T.Normal),{type:s};throw new Error("Map type is undefined")})()}setMapType(t){var e=this;return(0,d.Z)(function*(){e.maps[t.id].map.setMapTypeId(t.mapType)})()}enableIndoorMaps(t){return(0,d.Z)(function*(){throw new Error("Method not supported on web.")})()}enableTrafficLayer(t){var e=this;return(0,d.Z)(function*(){var s;const n=null!==(s=e.maps[t.id].trafficLayer)&&void 0!==s?s:new google.maps.TrafficLayer;t.enabled?(n.setMap(e.maps[t.id].map),e.maps[t.id].trafficLayer=n):e.maps[t.id].trafficLayer&&(n.setMap(null),e.maps[t.id].trafficLayer=void 0)})()}enableAccessibilityElements(t){return(0,d.Z)(function*(){throw new Error("Method not supported on web.")})()}dispatchMapEvent(t){throw new Error("Method not supported on web.")}enableCurrentLocation(t){var e=this;return(0,d.Z)(function*(){if(t.enabled){if(!navigator.geolocation)throw new Error("Geolocation not supported on web browser.");navigator.geolocation.getCurrentPosition(s=>{e.maps[t.id].map.setCenter({lat:s.coords.latitude,lng:s.coords.longitude}),e.notifyListeners("onMyLocationButtonClick",{}),e.notifyListeners("onMyLocationClick",{})},()=>{throw new Error("Geolocation not supported on web browser.")})}})()}setPadding(t){var e=this;return(0,d.Z)(function*(){const s=e.maps[t.id].map.getBounds();void 0!==s&&e.maps[t.id].map.fitBounds(s,t.padding)})()}getMapBounds(t){var e=this;return(0,d.Z)(function*(){const s=e.maps[t.id].map.getBounds();if(!s)throw new Error("Google Map Bounds could not be found.");return new nt.I({southwest:{lat:s.getSouthWest().lat(),lng:s.getSouthWest().lng()},center:{lat:s.getCenter().lat(),lng:s.getCenter().lng()},northeast:{lat:s.getNorthEast().lat(),lng:s.getNorthEast().lng()}})})()}addMarkers(t){var e=this;return(0,d.Z)(function*(){const s=[],n=e.maps[t.id];for(const o of t.markers){const r=e.buildMarkerOpts(o,n.map),l=new google.maps.Marker(r),i=""+e.currMarkerId;n.markers[i]=l,e.setMarkerListeners(t.id,i,l),s.push(i),e.currMarkerId++}return{ids:s}})()}addMarker(t){var e=this;return(0,d.Z)(function*(){const s=e.buildMarkerOpts(t.marker,e.maps[t.id].map),n=new google.maps.Marker(s),o=""+e.currMarkerId;return e.maps[t.id].markers[o]=n,e.setMarkerListeners(t.id,o,n),e.currMarkerId++,{id:o}})()}removeMarkers(t){var e=this;return(0,d.Z)(function*(){const s=e.maps[t.id];for(const n of t.markerIds)s.markers[n].setMap(null),delete s.markers[n]})()}removeMarker(t){var e=this;return(0,d.Z)(function*(){e.maps[t.id].markers[t.markerId].setMap(null),delete e.maps[t.id].markers[t.markerId]})()}enableClustering(t){var e=this;return(0,d.Z)(function*(){var s;const n=[];for(const o in e.maps[t.id].markers)n.push(e.maps[t.id].markers[o]);e.maps[t.id].markerClusterer=new yt({map:e.maps[t.id].map,markers:n,algorithm:new st({minPoints:null!==(s=t.minClusterSize)&&void 0!==s?s:4}),onClusterClick:e.onClusterClickHandler})})()}disableClustering(t){var e=this;return(0,d.Z)(function*(){var s;null===(s=e.maps[t.id].markerClusterer)||void 0===s||s.setMap(null),e.maps[t.id].markerClusterer=void 0})()}onScroll(t){return(0,d.Z)(function*(){throw new Error("Method not supported on web.")})()}create(t){var e=this;return(0,d.Z)(function*(){console.log(`Create map: ${t.id}`),yield e.importGoogleLib(t.apiKey),e.maps[t.id]={map:new window.google.maps.Map(t.element,Object.assign({},t.config)),element:t.element,markers:{}},e.setMapListeners(t.id)})()}destroy(t){var e=this;return(0,d.Z)(function*(){console.log(`Destroy map: ${t.id}`);const s=e.maps[t.id];s.element.innerHTML="",s.map.unbindAll(),delete e.maps[t.id]})()}mapBoundsContains(t){var e=this;return(0,d.Z)(function*(){const s=e.getLatLngBounds(t.bounds),n=new google.maps.LatLng(t.point.lat,t.point.lng);return{contains:s.contains(n)}})()}getLatLngBounds(t){return new google.maps.LatLngBounds(new google.maps.LatLng(t.southwest.lat,t.southwest.lng),new google.maps.LatLng(t.northeast.lat,t.northeast.lng))}setMarkerListeners(t,e,s){var n=this;return(0,d.Z)(function*(){s.addListener("click",()=>{var o,r;n.notifyListeners("onMarkerClick",{mapId:t,markerId:e,latitude:null===(o=s.getPosition())||void 0===o?void 0:o.lat(),longitude:null===(r=s.getPosition())||void 0===r?void 0:r.lng(),title:s.getTitle(),snippet:""})}),s.addListener("dragstart",()=>{var o,r;n.notifyListeners("onMarkerDragStart",{mapId:t,markerId:e,latitude:null===(o=s.getPosition())||void 0===o?void 0:o.lat(),longitude:null===(r=s.getPosition())||void 0===r?void 0:r.lng(),title:s.getTitle(),snippet:""})}),s.addListener("drag",()=>{var o,r;n.notifyListeners("onMarkerDrag",{mapId:t,markerId:e,latitude:null===(o=s.getPosition())||void 0===o?void 0:o.lat(),longitude:null===(r=s.getPosition())||void 0===r?void 0:r.lng(),title:s.getTitle(),snippet:""})}),s.addListener("dragend",()=>{var o,r;n.notifyListeners("onMarkerDragEnd",{mapId:t,markerId:e,latitude:null===(o=s.getPosition())||void 0===o?void 0:o.lat(),longitude:null===(r=s.getPosition())||void 0===r?void 0:r.lng(),title:s.getTitle(),snippet:""})})})()}setMapListeners(t){var e=this;return(0,d.Z)(function*(){const s=e.maps[t].map;s.addListener("idle",(0,d.Z)(function*(){var n,o;const r=yield e.getMapBounds({id:t});e.notifyListeners("onCameraIdle",{mapId:t,bearing:s.getHeading(),bounds:r,latitude:null===(n=s.getCenter())||void 0===n?void 0:n.lat(),longitude:null===(o=s.getCenter())||void 0===o?void 0:o.lng(),tilt:s.getTilt(),zoom:s.getZoom()})})),s.addListener("center_changed",()=>{e.notifyListeners("onCameraMoveStarted",{mapId:t,isGesture:!0})}),s.addListener("bounds_changed",(0,d.Z)(function*(){var n,o;const r=yield e.getMapBounds({id:t});e.notifyListeners("onBoundsChanged",{mapId:t,bearing:s.getHeading(),bounds:r,latitude:null===(n=s.getCenter())||void 0===n?void 0:n.lat(),longitude:null===(o=s.getCenter())||void 0===o?void 0:o.lng(),tilt:s.getTilt(),zoom:s.getZoom()})})),s.addListener("click",n=>{var o,r;e.notifyListeners("onMapClick",{mapId:t,latitude:null===(o=n.latLng)||void 0===o?void 0:o.lat(),longitude:null===(r=n.latLng)||void 0===r?void 0:r.lng()})}),e.notifyListeners("onMapReady",{mapId:t})})()}buildMarkerOpts(t,e){let s;return t.iconUrl&&(s={url:t.iconUrl,scaledSize:t.iconSize?new google.maps.Size(t.iconSize.width,t.iconSize.height):null,anchor:t.iconAnchor?new google.maps.Point(t.iconAnchor.x,t.iconAnchor.y):new google.maps.Point(0,0),origin:t.iconOrigin?new google.maps.Point(t.iconOrigin.x,t.iconOrigin.y):new google.maps.Point(0,0)}),{position:t.coordinate,map:e,opacity:t.opacity,title:t.title,icon:s,draggable:t.draggable}}}},2559:W=>{W.exports=function O(g,d){if(g===d)return!0;if(g&&d&&"object"==typeof g&&"object"==typeof d){if(g.constructor!==d.constructor)return!1;var C,L,A;if(Array.isArray(g)){if((C=g.length)!=d.length)return!1;for(L=C;0!=L--;)if(!O(g[L],d[L]))return!1;return!0}if(g.constructor===RegExp)return g.source===d.source&&g.flags===d.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===d.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===d.toString();if((C=(A=Object.keys(g)).length)!==Object.keys(d).length)return!1;for(L=C;0!=L--;)if(!Object.prototype.hasOwnProperty.call(d,A[L]))return!1;for(L=C;0!=L--;){var S=A[L];if(!O(g[S],d[S]))return!1}return!0}return g!=g&&d!=d}}}]);