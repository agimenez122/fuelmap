"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1079],{1592:(S,v,s)=>{s.d(v,{I:()=>f,T:()=>C});var c=s(5861),g=s(6306);class f{constructor(i){this.southwest=i.southwest,this.center=i.center,this.northeast=i.northeast}contains(i){var h=this;return(0,c.Z)(function*(){return(yield g.S.mapBoundsContains({bounds:h,point:i})).contains})()}}var C=(()=>{return(u=C||(C={})).Normal="Normal",u.Hybrid="Hybrid",u.Satellite="Satellite",u.Terrain="Terrain",u.None="None",C;var u})()},6306:(S,v,s)=>{s.d(v,{S:()=>g});const g=(0,s(7423).fo)("CapacitorGoogleMaps",{web:()=>s.e(2660).then(s.bind(s,2660)).then(f=>new f.CapacitorGoogleMapsWeb)});g.addListener("isMapInFocus",f=>{var C;const h=document.elementFromPoint(f.x,f.y),r=(null===(C=null==h?void 0:h.dataset)||void 0===C?void 0:C.internalId)===f.mapId;g.dispatchMapEvent({id:f.mapId,focus:r})})},1079:(S,v,s)=>{s.r(v),s.d(v,{Tab2PageModule:()=>b});var c=s(2945),g=s(6895),f=s(433),C=s(581),u=s(3087),i=s(5861),h=s(1592),L=s(7423),r=s(6306);class B extends HTMLElement{constructor(){super()}connectedCallback(){if("ios"==L.dV.getPlatform()){this.style.overflow="scroll",this.style["-webkit-overflow-scrolling"]="touch";const e=document.createElement("div");e.style.height="200%",this.appendChild(e)}}}customElements.define("capacitor-google-map",B);class y{constructor(e){this.element=null,this.handleScrollEvent=()=>this.updateMapBounds(),this.id=e}static create(e,n){return(0,i.Z)(function*(){const t=new y(e.id);if(!e.element)throw new Error("container element is required");void 0===e.config.androidLiteMode&&(e.config.androidLiteMode=!1),t.element=e.element,t.element.dataset.internalId=e.id;const d=yield y.getElementBounds(e.element);if(e.config.width=d.width,e.config.height=d.height,e.config.x=d.x,e.config.y=d.y,e.config.devicePixelRatio=window.devicePixelRatio,"android"==L.dV.getPlatform()&&t.initScrolling(),L.dV.isNativePlatform()&&(e.element={}),yield r.S.create(e),n){const m=yield r.S.addListener("onMapReady",p=>{p.mapId==t.id&&(n(p),m.remove())})}return t})()}static getElementBounds(e){return(0,i.Z)(function*(){return new Promise(n=>{let t=e.getBoundingClientRect();if(0==t.width){let d=0;const m=setInterval(function(){0==t.width&&d<30?(t=e.getBoundingClientRect(),d++):(30==d&&console.warn("Map size could not be determined"),clearInterval(m),n(t))},100)}else n(t)})})()}enableClustering(e){var n=this;return(0,i.Z)(function*(){return r.S.enableClustering({id:n.id,minClusterSize:e})})()}disableClustering(){var e=this;return(0,i.Z)(function*(){return r.S.disableClustering({id:e.id})})()}addMarker(e){var n=this;return(0,i.Z)(function*(){return(yield r.S.addMarker({id:n.id,marker:e})).id})()}addMarkers(e){var n=this;return(0,i.Z)(function*(){return(yield r.S.addMarkers({id:n.id,markers:e})).ids})()}removeMarker(e){var n=this;return(0,i.Z)(function*(){return r.S.removeMarker({id:n.id,markerId:e})})()}removeMarkers(e){var n=this;return(0,i.Z)(function*(){return r.S.removeMarkers({id:n.id,markerIds:e})})()}destroy(){var e=this;return(0,i.Z)(function*(){return"android"==L.dV.getPlatform()&&e.disableScrolling(),e.removeAllMapListeners(),r.S.destroy({id:e.id})})()}setCamera(e){var n=this;return(0,i.Z)(function*(){return r.S.setCamera({id:n.id,config:e})})()}getMapType(){var e=this;return(0,i.Z)(function*(){const{type:n}=yield r.S.getMapType({id:e.id});return h.T[n]})()}setMapType(e){var n=this;return(0,i.Z)(function*(){return r.S.setMapType({id:n.id,mapType:e})})()}enableIndoorMaps(e){var n=this;return(0,i.Z)(function*(){return r.S.enableIndoorMaps({id:n.id,enabled:e})})()}enableTrafficLayer(e){var n=this;return(0,i.Z)(function*(){return r.S.enableTrafficLayer({id:n.id,enabled:e})})()}enableAccessibilityElements(e){var n=this;return(0,i.Z)(function*(){return r.S.enableAccessibilityElements({id:n.id,enabled:e})})()}enableCurrentLocation(e){var n=this;return(0,i.Z)(function*(){return r.S.enableCurrentLocation({id:n.id,enabled:e})})()}setPadding(e){var n=this;return(0,i.Z)(function*(){return r.S.setPadding({id:n.id,padding:e})})()}getMapBounds(){var e=this;return(0,i.Z)(function*(){return new h.I(yield r.S.getMapBounds({id:e.id}))})()}initScrolling(){const e=document.getElementsByTagName("ion-content");for(let n=0;n<e.length;n++)e[n].scrollEvents=!0;window.addEventListener("ionScroll",this.handleScrollEvent),window.addEventListener("scroll",this.handleScrollEvent),window.addEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.addEventListener("change",()=>{setTimeout(this.updateMapBounds,500)}):window.addEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,500)})}disableScrolling(){window.removeEventListener("ionScroll",this.handleScrollEvent),window.removeEventListener("scroll",this.handleScrollEvent),window.removeEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.removeEventListener("change",()=>{setTimeout(this.updateMapBounds,1e3)}):window.removeEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,1e3)})}updateMapBounds(){if(this.element){const e=this.element.getBoundingClientRect();r.S.onScroll({id:this.id,mapBounds:{x:e.x,y:e.y,width:e.width,height:e.height}})}}setOnCameraIdleListener(e){var n=this;return(0,i.Z)(function*(){n.onCameraIdleListener&&n.onCameraIdleListener.remove(),n.onCameraIdleListener=e?yield r.S.addListener("onCameraIdle",n.generateCallback(e)):void 0})()}setOnBoundsChangedListener(e){var n=this;return(0,i.Z)(function*(){n.onBoundsChangedListener&&n.onBoundsChangedListener.remove(),n.onBoundsChangedListener=e?yield r.S.addListener("onBoundsChanged",n.generateCallback(e)):void 0})()}setOnCameraMoveStartedListener(e){var n=this;return(0,i.Z)(function*(){n.onCameraMoveStartedListener&&n.onCameraMoveStartedListener.remove(),n.onCameraMoveStartedListener=e?yield r.S.addListener("onCameraMoveStarted",n.generateCallback(e)):void 0})()}setOnClusterClickListener(e){var n=this;return(0,i.Z)(function*(){n.onClusterClickListener&&n.onClusterClickListener.remove(),n.onClusterClickListener=e?yield r.S.addListener("onClusterClick",n.generateCallback(e)):void 0})()}setOnClusterInfoWindowClickListener(e){var n=this;return(0,i.Z)(function*(){n.onClusterInfoWindowClickListener&&n.onClusterInfoWindowClickListener.remove(),n.onClusterInfoWindowClickListener=e?yield r.S.addListener("onClusterInfoWindowClick",n.generateCallback(e)):void 0})()}setOnInfoWindowClickListener(e){var n=this;return(0,i.Z)(function*(){n.onInfoWindowClickListener&&n.onInfoWindowClickListener.remove(),n.onInfoWindowClickListener=e?yield r.S.addListener("onInfoWindowClick",n.generateCallback(e)):void 0})()}setOnMapClickListener(e){var n=this;return(0,i.Z)(function*(){n.onMapClickListener&&n.onMapClickListener.remove(),n.onMapClickListener=e?yield r.S.addListener("onMapClick",n.generateCallback(e)):void 0})()}setOnMarkerClickListener(e){var n=this;return(0,i.Z)(function*(){n.onMarkerClickListener&&n.onMarkerClickListener.remove(),n.onMarkerClickListener=e?yield r.S.addListener("onMarkerClick",n.generateCallback(e)):void 0})()}setOnMarkerDragStartListener(e){var n=this;return(0,i.Z)(function*(){n.onMarkerDragStartListener&&n.onMarkerDragStartListener.remove(),n.onMarkerDragStartListener=e?yield r.S.addListener("onMarkerDragStart",n.generateCallback(e)):void 0})()}setOnMarkerDragListener(e){var n=this;return(0,i.Z)(function*(){n.onMarkerDragListener&&n.onMarkerDragListener.remove(),n.onMarkerDragListener=e?yield r.S.addListener("onMarkerDrag",n.generateCallback(e)):void 0})()}setOnMarkerDragEndListener(e){var n=this;return(0,i.Z)(function*(){n.onMarkerDragEndListener&&n.onMarkerDragEndListener.remove(),n.onMarkerDragEndListener=e?yield r.S.addListener("onMarkerDragEnd",n.generateCallback(e)):void 0})()}setOnMyLocationButtonClickListener(e){var n=this;return(0,i.Z)(function*(){n.onMyLocationButtonClickListener&&n.onMyLocationButtonClickListener.remove(),n.onMyLocationButtonClickListener=e?yield r.S.addListener("onMyLocationButtonClick",n.generateCallback(e)):void 0})()}setOnMyLocationClickListener(e){var n=this;return(0,i.Z)(function*(){n.onMyLocationClickListener&&n.onMyLocationClickListener.remove(),n.onMyLocationClickListener=e?yield r.S.addListener("onMyLocationClick",n.generateCallback(e)):void 0})()}removeAllMapListeners(){var e=this;return(0,i.Z)(function*(){e.onBoundsChangedListener&&(e.onBoundsChangedListener.remove(),e.onBoundsChangedListener=void 0),e.onCameraIdleListener&&(e.onCameraIdleListener.remove(),e.onCameraIdleListener=void 0),e.onCameraMoveStartedListener&&(e.onCameraMoveStartedListener.remove(),e.onCameraMoveStartedListener=void 0),e.onClusterClickListener&&(e.onClusterClickListener.remove(),e.onClusterClickListener=void 0),e.onClusterInfoWindowClickListener&&(e.onClusterInfoWindowClickListener.remove(),e.onClusterInfoWindowClickListener=void 0),e.onInfoWindowClickListener&&(e.onInfoWindowClickListener.remove(),e.onInfoWindowClickListener=void 0),e.onMapClickListener&&(e.onMapClickListener.remove(),e.onMapClickListener=void 0),e.onMarkerClickListener&&(e.onMarkerClickListener.remove(),e.onMarkerClickListener=void 0),e.onMyLocationButtonClickListener&&(e.onMyLocationButtonClickListener.remove(),e.onMyLocationButtonClickListener=void 0),e.onMyLocationClickListener&&(e.onMyLocationClickListener.remove(),e.onMyLocationClickListener=void 0)})()}generateCallback(e){const n=this.id;return t=>{t.mapId==n&&e(t)}}}var w=s(6090),E=s(9389),a=s(8256);let Z=(()=>{var o;class e{}return(o=e).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=a.Xpm({type:o,selectors:[["app-explore-container"]],inputs:{name:"name"},decls:0,vars:0,template:function(t,d){},styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})();const P=[{path:"",component:(()=>{var o;class e{constructor(t,d,m){this.modalCtrl=t,this.loadingCtrl=d,this.geo=m}ngAfterContentInit(){this.openMap()}openMap(){var t=this;return(0,i.Z)(function*(){t.firstShowLoading(),L.kv.get({url:"https://sedeaplicaciones.minetur.gob.es/ServiciosRESTCarburantes/PreciosCarburantes/EstacionesTerrestres/"}).then(k=>{t.listaGasolinerasESP=k.data.ListaEESSPrecio,console.log(k),t.printCurrentPosition()});const d=yield w.b.getCurrentPosition();let m=d.coords.latitude,p=d.coords.longitude;const l=document.getElementById("map");t.newMap=yield y.create({id:"my-map",element:l,apiKey:"AIzaSyDZUlsrDtQK7noZv8Poj-jXFHjvDJO4gJc",config:{center:{lat:m,lng:p},zoom:10}})})()}firstShowLoading(){var t=this;return(0,i.Z)(function*(){(yield t.loadingCtrl.create({message:"Cargando resultados...",duration:3e3})).present()})()}printCurrentPosition(){var t=this;return(0,i.Z)(function*(){const d=yield w.b.getCurrentPosition();let m=d.coords.latitude,p=d.coords.longitude;var M=[];for(var l of t.listaGasolinerasESP)l.temp=t.geo.getDistanceBetweenPoints(parseFloat(l.Latitud.replace(/,/g,".")),parseFloat(l["Longitud (WGS84)"].replace(/,/g,".")),m,p),M.push(l);for(M.sort(function(k,I){return k.temp<I.temp?-1:k.temp>I.temp?1:0}),t.listaBaratas=[],l=0;10!=l;l++)t.listaBaratas.push(M[l]);for(var l of t.listaBaratas)yield t.newMap.addMarker({coordinate:{lat:parseFloat(l.Latitud.replace(/,/g,".")),lng:parseFloat(l["Longitud (WGS84)"].replace(/,/g,"."))},iconUrl:"../../assets/icon/fuel_station_icon.ico",iconSize:{width:52,height:52},title:l.Latitud,snippet:l.Latitud})})()}}return(o=e).\u0275fac=function(t){return new(t||o)(a.Y36(c.IN),a.Y36(c.HT),a.Y36(E.i))},o.\u0275cmp=a.Xpm({type:o,selectors:[["app-tab2"]],decls:13,vars:2,consts:[[3,"translucent"],["color","danger"],["name","locate","slot","end",2,"padding-right","20px"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","map"],["name","Tab 2 page"]],template:function(t,d){1&t&&(a.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),a._uU(3," Mapa "),a.qZA(),a._UZ(4,"ion-icon",2),a.qZA()(),a.TgZ(5,"ion-content",3)(6,"ion-header",4)(7,"ion-toolbar")(8,"ion-title",5),a._uU(9,"Mapa"),a.qZA()()(),a.TgZ(10,"ion-content"),a._UZ(11,"capacitor-google-map",6),a.qZA(),a._UZ(12,"app-explore-container",7),a.qZA()),2&t&&(a.Q6J("translucent",!0),a.xp6(5),a.Q6J("fullscreen",!0))},dependencies:[c.W2,c.Gu,c.gu,c.wd,c.sr,Z],styles:["capacitor-google-map[_ngcontent-%COMP%]{display:inline-block;width:100%;height:100%}"]}),e})()}];let T=(()=>{var o;class e{}return(o=e).\u0275fac=function(t){return new(t||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[u.Bz.forChild(P),u.Bz]}),e})(),b=(()=>{var o;class e{}return(o=e).\u0275fac=function(t){return new(t||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[c.Pc,g.ez,f.u5,C.e,T]}),e})()}}]);